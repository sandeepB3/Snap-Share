<%- include('partials/header') %>

<div class="container">
  <div class="jcol jumbotron centered">
    <i class="col fas fa-camera-retro fa-6x"></i>
    <h1 class="display-3">Snapshare</h1>
    <p class="bgs secret-text">Post your photo, share them anonymously!</p>

    <form action="/submit" method="POST" enctype="multipart/form-data">

      <div class="form-group">
        <input type="file" id="inpFile" class="form-control text-center" name="mypic" required>
      </div>
      <div class="image-prev" id="imagePrev">
        <img src="" class="imgpi" alt="Image Preview">
        <span class="imgp">Image Preview</span> 
      </div>
      <br />
      <button type="submit" class="bgs btn btn-dark">Submit</button>
    </form>

    <script>
      const inpFile = document.getElementById("inpFile");
      const prevContainer =  document.getElementById("imagePrev");
      const previewImg = prevContainer.querySelector(".imgpi");
      const prevDefText = prevContainer.querySelector(".imgp")

      inpFile.addEventListener("change", function(){
        const file = this.files[0];
        console.log(file);

        if(file){
          const reader = new FileReader();
          prevDefText.style.display = "none";
          previewImg.style.display = "block";

          reader.addEventListener("load", function() {
            console.log(this);
            previewImg.setAttribute("src", this.result);
          });

          reader.readAsDataURL(file);
        }
        else{
          prevDefText.style.display = null;
          previewImg.style.display = null;
          previewImg.setAttribute("src", "");
        }
      })
    </script>

  </div>
</div>
<%- include('partials/footer') %>

<!-- img-thumbnail -->